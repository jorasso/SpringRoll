/*! SpringRoll 0.4.22 */
!function(){"use strict";!function(){function a(a){var b="color:"+a;return function(a){if(arguments.length>1){var e=c.call(arguments);if("object"==typeof e[0])e.unshift(b),e.unshift("%c%o");else{var f="%c"+e[0];e[0]=b,e.unshift(f)}return d.log.apply(d,e)}return"object"==typeof arguments[0]?d.log("%c%o",b,a):d.log("%c"+a,b)}}var b=include("springroll.Enum"),c=Array.prototype.slice,d={},e=void 0!==window.console,f=void 0===document.documentMode,g="DEBUG";if(e)try{console.assert.apply(console,[!0,"IE9 test"])}catch(h){for(var i,j=Function.prototype.bind,k=["log","debug","warn","info","error","assert","dir","trace","group","groupCollapsed","groupEnd"],l=0;l<k.length;l++)i=k[l],console[i]&&(console[i]=j.call(console[i],console))}var m=d.Levels=new b("GENERAL",g,"INFO","WARN","ERROR");d.minLogLevel=m.GENERAL,d.enabled=!0,d.output=null;var n=1026,o=!1,p=null,q=null,r=null,s={},t=["log","debug","warn","info","error","assert","dir","trace","group","groupCollapsed","groupEnd","_remoteLog","globalErrorHandler","navy","blue","aqua","teal","olive","green","lime","yellow","orange","red","pink","purple","maroon","silver","gray"],u=/(:\d+)+/;d.connect=function(a){if(!("WebSocket"in window||"MozWebSocket"in window))return!1;window.WebSocket=WebSocket||MozWebSocket;try{p=new WebSocket("ws://"+a+":"+n),p.onopen=v,p.onclose=w,p.onerror=w,r=[],o=!0}catch(b){return!1}return!0},d.disconnect=function(){o&&(p.close(),w())};var v=function(){window.onerror=s.globalErrorHandler,q={level:"session",message:"",stack:null,time:0},p.send(JSON.stringify(q));for(var a=0,b=r.length;b>a;++a)p.send(JSON.stringify(r[a]));r=null};s.globalErrorHandler=function(a,b,c,e,f){return d._remoteLog(a,m.ERROR,f?f.stack:null),!1};var w=function(){window.onerror=null,o=!1,p.onopen=null,p.onmessage=null,p.onclose=null,p.onerror=null,p=null,q=null,r=null},x=function(a,b){d.output&&(d.output.innerHTML+='<div class="'+a+'">'+b+"</div>")};d._remoteLog=function(a,b,e){b=b||m.GENERAL,Array.isArray(a)||(a=[a]),a=c.call(a);var f,g;for(f=0,g=a.length;g>f;f++)if("object"==typeof a[f])try{a[f]=z(a[f],3)}catch(h){a[f]=String(a[f])}e||(e=(new Error).stack),e=e?e.split("\n"):[];var i,j,k,l,n,o,s=-1,v=!0;for(f=0,g=e.length;g>f;++f){var w=e[f].trim();if(w)if("Error"==w||w.indexOf("Error:")>-1)s=f;else{if(w.indexOf("@")>-1){if(i=w.indexOf("@"),j=w.substring(0,i),n=-1!=j.indexOf(".")?j.substring(j.lastIndexOf(".")+1):j,v&&-1!=t.indexOf(n)){s=f;continue}k=w.substring(i+1)}else{if(i=w.indexOf("("),j=w.substring(3,i-1),n=-1!=j.indexOf(".")?j.substring(j.lastIndexOf(".")+1):j,v&&-1!=t.indexOf(n)){s=f;continue}k=w.substring(i+1,w.length-2)}o=u.exec(k),o?(k=k.substring(0,o.index),l=o[0].substring(1),v=!1,e[f]={"function":j||"<anonymous>",file:k,lineLocation:l}):e[f]={"function":"",file:"",lineLocation:""}}else if(f==g-1){e.pop();break}}if(s>=0&&(e=e.slice(s+1)),r)r.push({message:a,level:b.name,stack:e,time:Date.now()});else{q.level=b.name,q.message=a,q.stack=e,q.time=Date.now();var x;try{x=JSON.stringify(q)}catch(h){q.message=["[circular object]"],x=JSON.stringify(q)}p.send(x)}return d};var y=[],z=function(a,b,c){if(Array.isArray(a))return a;c=c||0,0===c&&(y.length=0),y.push(a);var d={};for(var e in a){var f=a[e];if(f instanceof Window||f instanceof Document||f instanceof HTMLElement||"document"==e||"window"==e||"ownerDocument"==e||"view"==e||"target"==e||"currentTarget"==e||"originalTarget"==e||"explicitOriginalTarget"==e||"rangeParent"==e||"srcElement"==e||"relatedTarget"==e||"fromElement"==e||"toElement"==e){if(f instanceof HTMLElement){var g;g="<"+f.tagName,f.id&&(g+=" id='"+f.id+"'"),f.className&&(g+=" class='"+f.className+"'"),d[e]=g+" />"}}else switch(typeof f){case"object":d[e]=c>b||y.indexOf(f)>-1?String(f):z(f,b,c+1);break;case"function":d[e]="[function]";break;case"string":case"number":case"boolean":case"bool":d[e]=f;break;default:d[e]=f}}return d};d.log=function(a){return d.enabled?(o?d._remoteLog(Array.prototype.slice.call(arguments)):d.minLogLevel==m.GENERAL&&(e&&(1===arguments.length?console.log(a):console.log.apply(console,arguments)),x("general",a)),d):d},d.debug=function(a){return d.enabled?(o?d._remoteLog(Array.prototype.slice.call(arguments),m[g]):d.minLogLevel.asInt<=m[g].asInt&&(e&&(console.debug?1===arguments.length?console.debug(a):console.debug.apply(console,arguments):1===arguments.length?console.log(a):console.log.apply(console,arguments)),x("debug",a)),d):d},d.info=function(a){return d.enabled?(o?d._remoteLog(Array.prototype.slice.call(arguments),m.INFO):d.minLogLevel.asInt<=m.INFO.asInt&&(e&&(1===arguments.length?console.info(a):console.info.apply(console,arguments)),x("info",a)),d):d},d.warn=function(a){return d.enabled?(o?d._remoteLog(Array.prototype.slice.call(arguments),m.WARN):d.minLogLevel.asInt<=m.WARN.asInt&&(e&&(1===arguments.length?console.warn(a):console.warn.apply(console,arguments)),x("warn",a)),d):d},d.error=function(a){return d.enabled?(o?d._remoteLog(Array.prototype.slice.call(arguments),m.ERROR):(e&&(1===arguments.length?console.error(a):console.error.apply(console,arguments)),x("error",a)),d):void 0},d.assert=function(a,b){return d.enabled&&(a||(x("error",b),o&&d._remoteLog(b,m.ERROR)),e&&console.assert&&console.assert(a,b)),d},d.dir=function(a){return d.enabled&&(o?d._remoteLog(Array.prototype.slice.call(arguments),m.GENERAL):e&&(1===arguments.length?console.dir(a):console.dir.apply(console,arguments))),d},d.clear=function(){return d.enabled&&(o&&d._remoteLog("","clear"),e&&console.clear(),d.output&&(d.output.innerHTML="")),d},d.trace=function(a){return d.enabled&&(o?d._remoteLog(Array.prototype.slice.call(arguments),m.GENERAL):e&&(1===arguments.length?console.trace(a):console.trace.apply(console,arguments))),d},d.group=function(a){return d.enabled&&(o?d._remoteLog(Array.prototype.slice.call(arguments),"group"):e&&console.group&&console.group.apply(console,arguments)),d},d.groupCollapsed=function(a){return d.enabled&&(o?d._remoteLog(Array.prototype.slice.call(arguments),"groupCollapsed"):e&&console.groupCollapsed&&console.groupCollapsed.apply(console,arguments)),d},d.groupEnd=function(){return d.enabled&&(o?d._remoteLog(Array.prototype.slice.call(arguments),"groupEnd"):e&&console.groupEnd&&console.groupEnd()),d};var A={navy:"#001F3F",blue:"#0074D9",aqua:"#7FDBFF",teal:"#39CCCC",olive:"#3D9970",green:"#2ECC40",lime:"#01FF70",yellow:"#FFDC00",orange:"#FF851B",red:"#FF4136",pink:"#F012BE",purple:"#B10DC9",maroon:"#85144B",silver:"#ddd",gray:"#aaa"};for(var B in A)f?d[B]=a(A[B]):d[B]=d.log;namespace("springroll").Debug=d}(),function(){var a={},b=4,c=[],d=0,e=0,f={HEADER:"color: #FF4136; font-size: 1.2em; text-decoration:underline;",LABEL:"color: #2ECC40;",TYPE:"color: #0074D9;",DESC:"color: #FF851B"},g="\n%cQuery Debug Options:\n%c",h={INT:"int",NUMBER:"number",STRING:"string",BOOLEAN:"boolean"};a["int"]=function(b,c){return a.add(b,h.INT,c)},a["boolean"]=function(b,c){return a.add(b,h.BOOLEAN,c)},a.string=function(b,c){return a.add(b,h.STRING,c)},a.number=function(b,c){return a.add(b,h.NUMBER,c)},a.add=function(b,f,g){return d=Math.max(b.length,d),e=Math.max(f.length,e),c.push({label:b,type:f,desc:g}),a},a.log=function(){var a=g,h=[f.HEADER,"display:none"];d+=b,e+=b;for(var j,k=i(d+e+b),l=c.length,m=0;l>m;m++)j=c[m],a+="	%c"+i(d,j.label),a+="%c"+i(e,j.type),j.desc&&(j.desc=j.desc.replace(/(\r\n|\n|\r)/gm,"\n"+k),a+="%c"+j.desc),a+="\n",h.push(f.LABEL,f.TYPE),j.desc&&h.push(f.DESC);console.log.apply(console,[a+"\n"].concat(h))},a.reset=function(){return c.length=[],d=0,e=0,a};var i=function(a,b){if(b)for(;b.length<a;)b+=" ";else for(b=" ";--a;)b+=" ";return b};namespace("springroll").DebugOptions=a}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.Debug"),c=new a;c.setup=function(){this.options.add("debug",!0),this.options.add("minLogLevel",0),this.options.add("framerate"),this._framerate=null,this.options.add("debugRemote",null).respond("debug",function(){return b.enabled}).on("debug",function(a){b.enabled=a}).on("debugRemote",function(a){b.disconnect(),a&&b.connect(a)}).respond("minLogLevel",function(){return b.minLogLevel.asInt}).on("minLogLevel",function(a){b.minLogLevel=b.Levels.valueFromInt(parseInt(a,10)),b.minLogLevel||(b.minLogLevel=b.Levels.GENERAL)})},c.preload=function(a){this.options.asDOMElement("framerate");var b=this.options.framerate,c=this.display;if(!b&&c){var d=c.canvas;b=document.createElement("div"),b.id="framerate",d.parentNode.insertBefore(b,d)}if(b){this._framerate=b,b.innerHTML="FPS: 00.000";var e=0,f=0;this.on("update",function(a){if(e++,f+=a,f>=1e3){var c=1e3/f*e;b.innerHTML="FPS: "+c.toFixed(3),f=0,e=0}}).on("resumed",function(){e=f=0})}a()},c.teardown=function(){b.disconnect()}}();}();