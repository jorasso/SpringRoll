/*! SpringRoll 0.4.22 */
!function(){"use strict";!function(a){var b=include("createjs.Container",!1);if(b){var c=b.prototype;c.cacheByBounds=function(a,b){this.cacheByRect(this.nominalBounds,a,b)},c.cacheByRect=function(b,c,d){c=c===a||null===c?0:c,d=d>0?d:1,this.cache(b.x-c,b.y-c,b.width+2*c,b.height+2*c,d)}}}(),function(a){var b=include("createjs.MovieClip",!1);if(b){var c=b.prototype;c.gotoAndCacheByBounds=function(b,c,d){b=b===a?0:b,this.gotoAndStop(b);var e=this.frameBounds?this.frameBounds[this.currentFrame]:this.nominalBounds;e?this.cacheByRect(e,c,d):this.uncache()}}}(),function(a){var b=include("createjs.Point",!1);b&&(b=b.prototype,b.dotProd=function(a){return this.x*a.x+this.y*a.y},b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},b.lengthSq=function(){return this.x*this.x+this.y*this.y},b.normalize=function(){var a=1/this.length();this.x*=a,this.y*=a},b.subtract=function(a){this.x-=a.x,this.y-=a.y},b.add=function(a){this.x+=a.x,this.y+=a.y},b.truncate=function(a){var b=this.length();if(b>a){var c=a/b;this.x*=c,this.y*=c}},b.scaleBy=function(a){this.x*=a,this.y*=a},b.distance=function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},b.distanceSq=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c})}(),function(){var a=include("createjs.SpriteSheet",!1);if(a){var b=a.prototype;b.destroy=function(){this.dispatchEvent("destroy"),this._images.forEach(function(a){a.onload=null,a.src=""}),this._images=null,this._data=null,this._frames=null,this._animations=null,this.removeAllEventListeners()}}}(),function(){var a=include("createjs.Bitmap"),b=include("createjs.Container"),c=include("createjs.Rectangle"),d={};d.loadSpriteSheet=function(d,e,f,g){f>0||(f=d.meta&&parseFloat(d.meta.scale)?1/parseFloat(d.meta.scale):1),g||(g="lib");var h=d.frames||d,i=d.meta&&"http://www.codeandweb.com/texturepacker"==d.meta.app,j=window[g];for(var k in h){var l=h[k],m=k.indexOf(".");m>0&&(k=k.substring(0,m));var n=j[k],o=j[k]=function(){b.call(this);var c=new a(this._image);this.addChild(c),c.sourceRect=this._frameRect;var d=this._scale;c.setTransform(this._frameOffsetX*d,this._frameOffsetY*d,d,d),this._rotated&&(c.rotation=-90,c.regX=c.sourceRect.width)},p=o.prototype=new b;p._image=e,p._scale=f;var q=l.rotated;q&&(p._rotated=!0);var r=l.frame;p._frameRect=new c(r.x,r.y,q&&i?r.h:r.w,q&&i?r.w:r.h),l.trimmed?(p._frameOffsetX=l.spriteSourceSize.x,p._frameOffsetY=l.spriteSourceSize.y):p._frameOffsetX=p._frameOffsetY=0,n&&n.prototype.nominalBounds?p.nominalBounds=n.prototype.nominalBounds:p.nominalBounds=new c(0,0,l.sourceSize.w*f,l.sourceSize.h*f)}},d.bitmapFromTexture=function(d,e){e>0||(e=1);var f=new b,g=new a(d.image);return f.addChild(g),g.sourceRect=d.frame,g.setTransform(d.offset.x*e,d.offset.y*e,e,e),d.rotated&&(g.rotation=-90,g.regX=g.sourceRect.width),f.nominalBounds=new c(0,0,d.width*e,d.height*e),f},d.replaceWithScaledBitmap=function(a,c,d){if(1!=c&&c>0){d||(d="lib");var e,f,g,h,i=window[d];if("string"==typeof a)e=a,f=i[e],f&&(g=i[e]=function(){b.call(this);var a=new this._oldBM;this.addChild(a),a.setTransform(0,0,this._scale,this._scale)},h=g.prototype=new b,h._oldBM=f,h._scale=c,h.nominalBounds=f.prototype.nominalBounds);else for(e in a)f=i[e],f&&(g=i[e]=function(){b.call(this);var a=new this._oldBM;this.addChild(a),a.setTransform(0,0,this._scale,this._scale)},h=g.prototype=new b,h._oldBM=f,h._scale=c,h.nominalBounds=f.prototype.nominalBounds)}},namespace("createjs").BitmapUtils=d,namespace("springroll.easeljs").BitmapUtils=d}(),function(a){var b=function(a,b,c){this.dom=b,this.symbols=[],this.libName=c||"lib",this.id=a,this.parseSymbols(b.text)},c=extend(b);b.globalSymbols={},c.parseSymbols=function(a){for(var c=a.split(/[\(!]function\s*\(/),d=b.globalSymbols,e=0;e<c.length;++e)if(a=c[e]){var f=a.substring(0,a.indexOf(","));if(f)for(var g,h=new RegExp("\\("+f+".(\\w+)\\s*=","g"),i=h.exec(a);i;)g=i[1],this.symbols.push(g),d[g]=this.id,i=h.exec(a)}},c.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var a=b.globalSymbols,c=window[this.libName];this.symbols.forEach(function(b){delete a[b],delete c[b]}),this.symbols=null},namespace("springroll.easeljs").FlashArt=b}(),function(){var a=include("springroll.Task"),b=include("springroll.easeljs.FlashArt"),c=include("springroll.Application"),d=function(b){a.call(this,b,b.src),this.src=this.filter(b.src),this.images=b.images,this.atlas=this.filter(b.atlas),this.image=this.filter(b.image),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha),this.libName=b.libName||"lib",this.imagesName=b.imagesName||"images"},e=a.extend(d);d.test=function(a){return a.src&&a.src.search(/\.js$/i)>-1&&"easeljs"==a.type&&"springroll.easeljs.FlashArt"==a.format},e.start=function(a){var d,e=[],f=0;if(this.atlas)d={atlas:this.atlas,id:"asset_"+f++,type:"easeljs",format:"FlashAtlas",libName:this.libName},this.image?d.image=this.image:(d.alpha=this.alpha,d.color=this.color),e.push(d);else if(this.images)for(var g,h=0;h<this.images.length;++h)if(this.images[h].atlas)g=this.images[h],d={atlas:this.filter(g.atlas),id:"asset_"+f++,type:"easeljs",format:"FlashAtlas",libName:this.libName},g.image?d.image=this.filter(g.image):(d.alpha=this.filter(g.alpha),d.color=this.filter(g.color)),e.push(d);else if("createjs.SpriteSheet"==this.images[h].format){if(g=this.images[h].clone(),e.push(g),g.type||(g.type="easeljs"),!g.id){var i=g.src;i=i.substr(0,i.lastIndexOf(".")),i=i.substr(i.lastIndexOf("/")+1),g.id=i}}else{if(g="string"==typeof this.images[h]?{src:this.filter(this.images[h])}:this.images[h].clone(),!g.id){var j=g.src||g.color,k=j.lastIndexOf(".");k>-1&&(j=j.substr(0,k));var l=j.lastIndexOf("/");l>-1&&(j=j.substr(l+1)),g.id=j}g.type="easeljs",g.format="FlashImage",g.imagesName=this.imagesName,e.push(g)}var m={_flash:this.src};e.length&&(m._images={assets:e}),c.instance.load(m,function(c){var d=new b(this.id,c._flash,this.libName),e=c._images;if(e){var f=[];namespace(this.imagesName);for(var g in e){var h=e[g];f.push(h),h.image&&h.scale?1!=h.scale&&Bitmap.replaceWithScaledBitmap(g,1/h.scale,this.libName):h.create&&h.create()}d._orig_destroy=d.destroy,d.destroy=function(){var a;for(a=f.length-1;a>=0;--a)f[a].destroy?f[a].destroy():f[a].dispatchEvent("destroy");d._orig_destroy()}}a(d)}.bind(this))},namespace("springroll.easeljs").FlashArtTask=d}(),function(a){var b=function(a,b){Array.isArray(a)?this._images=a:(this._images=[a],b=[b]),this.frames={},b[0].meta&&parseFloat(b[0].meta.scale)?this.scale=parseFloat(b[0].meta.scale):this.scale=1;for(var c=0;c<this._images.length;++c){a=this._images[c];var e=b[c].meta&&"http://www.codeandweb.com/texturepacker"==b[c].meta.app,f=b[c].frames;for(var g in f){var h=f[g],i=g.lastIndexOf(".");i>0&&(g=g.substring(0,i)),i=g.lastIndexOf("/"),i>=0&&(g=g.substring(i+1)),this.frames[g]=new d(a,h,e)}}},c=extend(b);c.getFrame=function(a){return this.frames[a]||null},c.getFrames=function(b,c,d,e,f){e===a&&(e=4),0>e&&(e=0),f||(f=[]);var g,h,i=[],j=[];for(g=1;e>g;++g){var k="";h=1;for(var l=0;g>l;++l)k+="0",h*=10;i.unshift(k),j.push(h)}var m,n,o=j.length;for(g=c,n=d;n>=g;++g){var p=null;for(h=0;o>h;++h)if(g<j[h]){p=i[h]+g;break}p||(p=g.toString());var q=b.replace("#",p),r=this.frames[q];r&&(m=r),m&&f.push(m)}return f},c.destroy=function(){this.image=null,this.frames=null},namespace("createjs").TextureAtlas=b,namespace("springroll.easeljs").TextureAtlas=b;var d=function(a,b,c){this.image=a,this.rotated=b.rotated;var d=b.frame;this.frame=new createjs.Rectangle(d.x,d.y,b.rotated&&c?d.h:d.w,b.rotated&&c?d.w:d.h),this.trimmed=b.trimmed,this.offset=new createjs.Point(b.spriteSourceSize.x,b.spriteSourceSize.y),this.width=b.sourceSize.w,this.height=b.sourceSize.h}}(),function(){var a=include("springroll.Task"),b=include("springroll.easeljs.TextureAtlas"),c=include("springroll.ColorAlphaTask"),d=function(b){a.call(this,b,b.atlas),this.atlas=this.filter(b.atlas),this.image=this.filter(b.image),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha)},e=a.extend(d);d.test=function(a){return"easeljs"==a.type&&a.atlas&&(a.image||a.alpha&&a.color)},e.start=function(a){this.loadAtlas({},a)},e.loadAtlas=function(a,d){a._atlas=this.atlas,this.image?a._image=this.image:(a._color=this.color,a._alpha=this.alpha),this.load(a,function(a){var e;e=a._image?a._image:c.mergeAlpha(a._color,a._alpha);var f=new b(e,a._atlas);d(f,a)})},namespace("springroll.easeljs").TextureAtlasTask=d}(),function(){var a=include("springroll.Task"),b=function(b){a.call(this,b,b.color),this.src=this.filter(b.src),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha),this.imagesName=b.imagesName},c=a.extend(b);b.test=function(a){return"easeljs"==a.type&&"FlashImage"==a.format&&!!(a.src||a.alpha&&a.color)},c.start=function(a){var b=this.src;b||(b={alpha:this.alpha,color:this.color}),this.load(b,function(b){var c=b,d=namespace(this.imagesName);d[this.id]=c;var e={image:c,scale:this.scale,id:this.id};e.destroy=function(){c.src="",delete d[this.id]},a(e)}.bind(this))},namespace("springroll.easeljs").FlashArtImageTask=b}(),function(){var a=include("springroll.Task"),b=(include("springroll.easeljs.TextureAtlas"),include("springroll.ColorAlphaTask")),c=include("springroll.easeljs.BitmapUtils"),d=function(b){a.call(this,b,b.atlas),this.atlas=this.filter(b.atlas),this.image=this.filter(b.image),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha),this.libName=b.libName||"lib"},e=a.extend(d);d.test=function(a){return"easeljs"==a.type&&"FlashAtlas"==a.format&&a.atlas&&(a.image||a.alpha&&a.color)},e.start=function(a){this.loadAtlas({},a)},e.loadAtlas=function(a,d){a._atlas=this.atlas,this.image?a._image=this.image:(a._color=this.color,a._alpha=this.alpha),this.load(a,function(a){var e;e=a._image?a._image:b.mergeAlpha(a._color,a._alpha);var f=a._atlas.meta?1/parseFloat(a._atlas.meta.scale):0;f||(f=1/this.original.scale);var g={},h=this.libName;g.create=function(){c.loadSpriteSheet(a._atlas,e,f,h)};var i=namespace(this.libName),j=a._atlas.frames;g.destroy=function(){for(var a in j)delete i[a];e.src=null},d(g,a)}.bind(this))},namespace("springroll.easeljs").FlashArtAtlasTask=d}(),function(){var a=include("springroll.Task"),b=include("createjs.SpriteSheet"),c=function(b){a.call(this,b,b.images[0]),this.images=b.images,this.frames=b.frames,this.globalProperty=b.globalProperty||"ss"},d=a.extend(c);c.test=function(a){return a.images&&"easeljs"==a.type&&Array.isArray(a.images)&&a.frames},d.start=function(a){var c=this.globalProperty,d=this.id,e=this.frames;this.load(this.images,function(f){var g=new b({images:f,frames:e});namespace(c)[d]=g,g.addEventListener("destroy",function(){delete window[c][d];for(var a=f.length-1;a>=0;--a)f[a].src=""}),a(g)})},namespace("springroll.easeljs").SpriteSheetTask=c}(),function(){var a=include("springroll.LoadTask"),b=function(b){a.call(this,b),this.globalProperty=b.globalProperty||"ss"},c=a.prototype,d=a.extend(b);b.test=function(a){return a.src&&"easeljs"==a.type&&"createjs.SpriteSheet"==a.format},d.start=function(a){var b=this.globalProperty,d=this.id;c.start.call(this,function(c){c.id=d,c.globalProperty=b,c.type="easeljs",this.load(c,a)}.bind(this))},namespace("springroll.easeljs").FlashSpriteSheetTask=b}(),function(){var a=include("springroll.LoadTask"),b=include("createjs.Bitmap"),c=(include("springroll.Application"),function(b){a.call(this,b)}),d=a.prototype,e=a.extend(c);c.test=function(a){return a.src&&"easeljs"==a.type&&"createjs.Bitmap"==a.format},e.start=function(a){d.start.call(this,function(c){var d=new b(c);d.destroy=function(){this.removeAllEventListeners(),this.image.src=""},a(d)})},namespace("springroll.easeljs").BitmapTask=c}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){var a=this.assetManager;a.register("springroll.easeljs.TextureAtlasTask",30),a.register("springroll.easeljs.FlashArtImageTask",40),a.register("springroll.easeljs.FlashArtAtlasTask",40),a.register("springroll.easeljs.FlashArtTask",50),a.register("springroll.easeljs.SpriteSheetTask",70),a.register("springroll.easeljs.FlashSpriteSheetTask",80),a.register("springroll.easeljs.BitmapTask",90),this.once("displayAdded",function(a){var b=this.options;!b.defaultAssetType&&a instanceof include("springroll.EaselJSDisplay")&&(b.defaultAssetType="easeljs")})}}(),function(a){var b={};b.Circle=include("createjs.Circle",!1),b.Ellipse=include("createjs.Ellipse",!1),b.Rectangle=include("createjs.Rectangle"),b.Sector=include("createjs.Sector",!1),b.Point=include("createjs.Point"),b.Polygon=include("createjs.Polygon",!1),b.useRadians=!1,b.getLocalBounds=function(b){var c;if(b.nominalBounds)c=b.nominalBounds.clone();else if(b.width!==a&&b.height!==a){var d=b.width/Math.abs(b.scaleX),e=b.height/Math.abs(b.scaleY);c=new createjs.Rectangle(-b.regX,-b.regY,d,e)}else b.getLocalBounds&&(c=b.getLocalBounds(),c&&(c=c.clone())),c||(c=new createjs.Rectangle);return c.right=c.x+c.width,c.bottom=c.y+c.height,c},b.getScale=function(b,c){return c!==a?b["scale"+c.toUpperCase()]:{x:b.scaleX,y:b.scaleY}},b.setPosition=function(b,c,d){return d!==a?b[d]=c:(c.x!==a&&(b.x=c.x),c.y!==a&&(b.y=c.y)),b},b.getPosition=function(b,c){return c!==a?b[c]:{x:b.x,y:b.y}},b.setScale=function(b,c,d){return d!==a?b["scale"+d.toUpperCase()]=c:b.scaleX=b.scaleY=c,b},b.setPivot=function(b,c,d){return d!==a&&(b["reg"+d.toUpperCase()]=c),b.regX=c.x,b.regY=c.y,b},b.setHitArea=function(a,b){return a.hitShape=b,a},b.getBitmapSize=function(b){var c={w:0,h:0};return b.nominalBounds?(c.w=b.nominalBounds.width,c.h=b.nominalBounds.height):b.width!==a&&b.height!==a?(c.w=b.width,c.h=b.height):b.sourceRect?(c.w=b.sourceRect.width,c.h=b.sourceRect.height):b.image&&(c.w=b.image.width,c.h=b.image.height),c},b.removeChildren=function(a){a.removeAllChildren()},b.contains=function(a,b){return a.contains(b)},namespace("springroll.easeljs").DisplayAdapter=b}(),function(a){var b,c,d=include("springroll.AbstractDisplay"),e=function(a,e){b||(b=include("createjs.Stage"),c=include("createjs.Touch")),d.call(this,a,e),e=e||{},this.mouseOverRate=e.mouseOverRate||30,this.keepMouseover=e.keepMouseover||!1,this._autoPreventDefault=e.hasOwnProperty("autoPreventDefault")?e.autoPreventDefault:!0,"spriteStage"==e.stageType||(this.stage=new b(a)),this.stage.autoClear=!!e.clearView,this.stage.preventSelection=this._autoPreventDefault,this.adapter=include("springroll.easeljs.DisplayAdapter")},f=d.prototype,g=d.extend(e),h={delta:0};Object.defineProperty(g,"enabled",{get:function(){return this._enabled},set:function(a){Object.getOwnPropertyDescriptor(f,"enabled").set.call(this,a),a?(this.stage.enableMouseOver(this.mouseOverRate),this.stage.enableDOMEvents(!0),c.enable(this.stage,!1,!this._autoPreventDefault)):(this.keepMouseover?this.stage.enableDOMEvents("keepMove"):(this.stage.enableMouseOver(!1),this.stage.enableDOMEvents(!1)),c.disable(this.stage),"none"!=this.canvas.style.cursor&&(this.canvas.style.cursor=""))}}),Object.defineProperty(g,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(a){this._autoPreventDefault=!!a,this.stage&&(this._enabled&&(c.disable(this.stage),c.enable(this.stage,!1,!this._autoPreventDefault)),this.stage.preventSelection=this._autoPreventDefault)}}),g.render=function(a,b){(b||!this.paused&&this._visible)&&(h.delta=a,this.stage.update(h))},g.destroy=function(){this.stage.removeAllChildren(!0),f.destroy.call(this)},namespace("springroll").EaselJSDisplay=e,namespace("springroll.easeljs").EaselJSDisplay=e}(),function(a){var b=include("springroll.easeljs.EaselJSDisplay"),c=include("springroll.Application");a.defineProperty(b.prototype,"animator",{get:function(){return c.instance.animator}})}(Object);}();