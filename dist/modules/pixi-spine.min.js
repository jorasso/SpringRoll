/*! SpringRoll 0.4.22 */
!function(){"use strict";!function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){this.assetManager.register("springroll.pixi.SpineAtlasTask",40),this.assetManager.register("springroll.pixi.SpineAnimTask",40),this.animator.register("springroll.pixi.SpineInstance",10)}}(),function(){var a=function(a,b,c){this.anim=a,this.loop=!!b,this.speed=c>0?c:1};namespace("springroll.pixi").ParallelSpineData=a}(),function(a){var b=(include("springroll.Application"),include("springroll.AnimatorInstance")),c=include("PIXI.spine.Spine",!1),d=include("springroll.pixi.ParallelSpineData");if(c){var e=function(){b.call(this),this.prevPosition=0},f=b.extend(e);f.init=function(a){a.autoUpdate=!1,this.clip=a,this.isLooping=!1,this.currentName=null,this.position=this.duration=0},f.beginAnim=function(a,b){var c=this.clip.state;c.clearTracks();var e=this.clip.stateData.skeletonData;this.isLooping=!!a.loop;var f=this.currentName=a.anim;if("string"==typeof f)this.duration=e.findAnimation(f).duration,c.setAnimationByName(0,f,this.isLooping);else{var g;if(f[0]instanceof d){this.duration=0;var h,i=0,j=0;for(g=0;g<f.length;++g){var k=f[g].loop;c.setAnimationByName(g,f[g].anim,k),h=e.findAnimation(f[g].anim).duration,k?h>j&&(j=h):h>i&&(i=h)}this.duration=i||j}else if(this.duration=e.findAnimation(f[0]).duration,1==f.length)c.setAnimationByName(0,f[0],this.isLooping);else for(c.setAnimationByName(0,f[0],!1),g=1;g<f.length;++g)c.addAnimationByName(0,f[g],this.isLooping&&g==f.length-1),this.duration+=e.findAnimation(f[g]).duration}if(b)this.position=0;else{var l=a.start||0;this.position=0>l?Math.random()*this.duration:l}this.clip.update(this.position)},f.endAnim=function(){this.clip.update(this.duration-this.position)},f.setPosition=function(a){a<this.position?this.clip.update(this.duration-this.position+a):this.clip.update(a-this.position),this.position=a},e.test=function(a){return a instanceof c},e.hasAnimation=function(a,b){var c,e=a.stateData.skeletonData;if("string"==typeof b)return!!e.findAnimation(b);if(Array.isArray(b)){if(b[0]instanceof d){for(c=0;c<b.length;++c)if(!e.findAnimation(b[c].anim))return!1}else for(c=0;c<b.length;++c)if(!e.findAnimation(b[c]))return!1;return!0}return!1},e.getDuration=function(a,b){var c,e=this.clip.stateData.skeletonData;if("string"==typeof anim)return e.findAnimation(anim).duration;if(Array.isArray(anim)){var f=0;if(anim[0]instanceof d){var g,h=0,i=0;for(c=0;c<anim.length;++c){var j=anim[c].loop;g=e.findAnimation(anim[c].anim).duration,j?g>i&&(i=g):g>h&&(h=g)}f=h||i}else if(f=e.findAnimation(anim[0]).duration,anim.length>1)for(c=1;c<anim.length;++c)f+=e.findAnimation(anim[c]).duration;return f}return 0},f.destroy=function(){this.clip=null},namespace("springroll.pixi").SpineInstance=e}}(),function(a){var b=include("PIXI.spine.SpineRuntime.AtlasReader",!1),c=include("PIXI.spine.SpineRuntime.AtlasPage",!1),d=include("PIXI.spine.SpineRuntime.AtlasRegion",!1),e=include("PIXI.spine.SpineRuntime.Atlas",!1);if(b){var f=function(a,f){if(this.pages=[],this.regions=[],a){var g=new b(a),h=[];h.length=4;for(var i=null;;){var j=g.readLine();if(null===j)break;if(j=g.trim(j),j.length)if(i){var k=new d;k.name=j,k.page=i,k.rotate="true"==g.readValue(),g.readTuple(h);var l=parseInt(h[0]),m=parseInt(h[1]);g.readTuple(h);var n=parseInt(h[0]),o=parseInt(h[1]);k.u=l/i.width,k.v=m/i.height,k.rotate?(k.u2=(l+o)/i.width,k.v2=(m+n)/i.height):(k.u2=(l+n)/i.width,k.v2=(m+o)/i.height),k.x=l,k.y=m,k.width=Math.abs(n),k.height=Math.abs(o),4==g.readTuple(h)&&(k.splits=[parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3])],4==g.readTuple(h)&&(k.pads=[parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3])],g.readTuple(h))),k.originalWidth=parseInt(h[0]),k.originalHeight=parseInt(h[1]),g.readTuple(h),k.offsetX=parseInt(h[0]),k.offsetY=parseInt(h[1]),k.index=parseInt(g.readValue()),this.regions.push(k)}else{i=new c,i.name=j,2==g.readTuple(h)&&(i.width=parseInt(h[0]),i.height=parseInt(h[1]),g.readTuple(h)),i.format=e.Format[h[0]],g.readTuple(h),i.minFilter=e.TextureFilter[h[0]],i.magFilter=e.TextureFilter[h[1]];var p=g.readValue();i.uWrap=e.TextureWrap.clampToEdge,i.vWrap=e.TextureWrap.clampToEdge,"x"==p?i.uWrap=e.TextureWrap.repeat:"y"==p?i.vWrap=e.TextureWrap.repeat:"xy"==p&&(i.uWrap=i.vWrap=e.TextureWrap.repeat),i.rendererObject=f[j].baseTexture,this.pages.push(i)}else i=null}}},g=extend(f);g.findRegion=function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},g.dispose=function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)a[b].rendererObject.destroy(!0)},g.updateUVs=function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}},g.addImage=function(a,b){var f=new c;f.name=a,f.width=b.width,f.height=b.height,f.format="RGBA8888",f.minFilter=f.magFilter="Nearest",f.uWrap=e.TextureWrap.clampToEdge,f.vWrap=e.TextureWrap.clampToEdge,f.rendererObject=b.baseTexture,this.pages.push(f);var g=new d;g.name=a,g.page=f,g.rotate=!1,g.u=g.v=0,g.u2=g.v2=1,g.x=g.y=0,g.originalWidth=g.width=f.width,g.originalHeight=g.height=f.height,g.offsetX=g.offsetY=0,g.index=-1,this.regions.push(g)},g.fromTextureAtlas=function(a,b){var f=new c;f.name=b,f.width=a.baseTexture.width,f.height=a.baseTexture.height,f.format="RGBA8888",f.minFilter=f.magFilter="Nearest",f.uWrap=e.TextureWrap.clampToEdge,f.vWrap=e.TextureWrap.clampToEdge,f.rendererObject=a.baseTexture,this.pages.push(f);for(b in a.frames){var g=a.frames[b],h=new d;h.name=b,h.page=f,h.rotate=g.rotate;var i=g.crop.x,j=g.crop.y,k=g.crop.width,l=g.crop.height;h.u=i/f.width,h.v=j/f.height,h.rotate?(h.u2=(i+l)/f.width,h.v2=(j+k)/f.height):(h.u2=(i+k)/f.width,h.v2=(j+l)/f.height),h.x=i,h.y=j,h.width=Math.abs(k),h.height=Math.abs(l),h.originalWidth=g.width,h.originalHeight=g.height,g.trim?(h.offsetX=g.trim.x,h.offsetY=g.trim.y):h.offsetX=h.offsetY=0,h.index=-1,this.regions.push(h)}},g.destroy=function(){this.dispose(),this.pages=this.regions=null},namespace("springroll.pixi").SpineAtlas=f}}(),function(){var a=include("springroll.pixi.TextureTask"),b=include("springroll.pixi.SpineAtlas",!1);include("PIXI.utils");if(b){var c=function(b,c){a.call(this,b,c||b.spineAtlas),this.spineAtlas=this.filter(b.spineAtlas),this.images=b.images},d=a.extend(c);c.test=function(b){return!!b.spineAtlas&&Array.isArray(b.images)&&a.test(b.images[0])},d.start=function(a){this.load({_atlas:this.spineAtlas,_images:this.images},function(c){a(new b(c._atlas,c._images),c)})},namespace("springroll.pixi").SpineAtlasTask=c}}(),function(){var a=include("springroll.Task"),b=include("springroll.pixi.TextureAtlasTask"),c=include("PIXI.spine.loaders.atlasParser",!1),d=include("PIXI.spine.SpineRuntime.SkeletonJsonParser",!1),e=include("PIXI.spine.SpineRuntime.AtlasAttachmentParser",!1),f=include("springroll.pixi.SpineAtlasTask",!1),g=include("springroll.pixi.SpineAtlas",!1);if(c){var h=function(b){a.call(this,b,b.spineAnim),this.spineAnim=this.filter(b.spineAnim),this.atlas=b.atlas,this.extraImages=b.extraImages},i=a.extend(h);h.test=function(a){return a.spineAnim&&(!a.atlas||b.test(a.atlas)||f.test(a.atlas))?a.atlas?!0:!!a.extraImages:!1},i.start=function(a){var b={_anim:this.spineAnim};this.atlas&&(b._atlas=this.atlas),this.extraImages&&(b._images={assets:this.extraImages}),this.load(b,function(b){var f=b._atlas;if(f||(f=new g),!(f instanceof g)){var h=f;f=new g,f.fromTextureAtlas(h)}if(b._images)for(var i in b._images)f.addImage(i,b._images[i]);var j=new d(new e(f)),k=j.readSkeletonData(b._anim),l={id:this.id,spineData:k,spineAtlas:f};c.enableCaching&&this.cache&&(c.AnimCache[this.id]=k),l.destroy=function(){delete c.AnimCache[this.id],this.spineAtlas.destroy(),this.spineData=this.spineAtlas=null},a(l,b)}.bind(this))},i.destroy=function(){a.prototype.destroy.call(this)},namespace("springroll.pixi").SpineAnimTask=h}}();}();