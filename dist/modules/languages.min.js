/*! SpringRoll 0.4.22 */
!function(){"use strict";!function(a,b){var c=(include("springroll.Loader"),include("springroll.Application")),d=include("springroll.EventDispatcher"),e=function(a){if(h)throw"Only one Languages can exist at a time!";h=this,d.call(this),this._replace="%LANG%",this._current=null,this._default=null,this.languages=null,this._stringTable=null},f=d.prototype,g=d.extend(e);g.setConfig=function(a){if(!a.languages||!a["default"])throw"Languages requires a language dictionary and a default language!";this._replace=a.replace||this._replace,this._default=a["default"],this.languages=a.languages,this.setLanguage(this.getPreferredLanguages()),this.modifyUrl=this.modifyUrl.bind(this),c.instance.loader.cacheManager.registerURLFilter(this.modifyUrl)};var h=null;Object.defineProperty(e,"instance",{get:function(){return h}}),Object.defineProperty(g,"current",{get:function(){return this._current}}),g.getPreferredLanguages=function(){var b,c=a.navigator;return b=c.languages?c.languages:c.language?[c.language||c.userLanguage]:[]},g.setLanguage=function(a){if(a){Array.isArray(a)||(a=[a]);for(var b,c=0,d=a.length;d>c;++c){var e=a[c].toLowerCase();if(this.languages.indexOf(e)>=0){b=e;break}if(e.indexOf("-")>=0&&(e=e.split("-")[0].toLowerCase(),this.languages.indexOf(e)>=0)){b=e;break}}b||(b=this._default),b!=this._current&&(this._current=b,this.trigger("changed",b))}},g.setStringTable=function(a){this._stringTable=a},g.getString=function(a){return this._stringTable?this._stringTable[a]:null},g.getFormattedString=function(a){var b=this._stringTable?this._stringTable[a]:null;return b?b.format(Array.prototype.slice.call(arguments,1)):null},g.modifyUrl=function(a){for(;a.indexOf(this._replace)>=0;)a=a.replace(this._replace,this._current);return a},g.destroy=function(){var a=c.instance.loader;a&&a.cacheManager.unregisterURLFilter(this.modifyUrl),this.modifyUrl=this.languages=null,h=null,f.destroy.call(this)},namespace("springroll").Languages=e}(window),function(){var a,b=include("springroll.ApplicationPlugin"),c=include("springroll.Languages"),d=new b(95);d.setup=function(){this.languages=new c,this.options.add("language",null,!0),this.options.add("languagesPath",null,!0)},d.preload=function(b){var c=this.options.languagesPath;c?this.load(c,function(a){this.languages.setConfig(a);var c=this.options.language;c&&this.languages.setLanguage(c),b()}.bind(this)):(a=include("springroll.Debug",!1),b())},d.teardown=function(){this.languages&&this.languages.destroy(),this.languages=null}}();}();